
just for me, questions to ask to kiki...


1) J'ai pris skyutils+ffss complet tout frais de cvs update.
J'ai bien mate avant de compiler qu'il n'y ait pas de .h ou
de .so/.a restant dans /usr/local. J'ai tout compile en debug+
malloc trace. resultat, je lance le master :

FFSS Master v1.0-pre39 (c) Ze KiLleR / SkyTech 2001
FFSS library v1.0.0-pre68 (c) Ze KiLleR / SkyTech 2001
Master started
SkyUtils Information : Using SU_MALLOC_TRACE hooks : MALLOC_CHECK_=1 SU_MALLOC_TRACE=1 SU_MALLOC_PRINT=0
Warning : Master launched from a non-root user. Cannot use setuid/setgid
FFSS(4) : Loading index from disk... (./Dump.dat)
FFSS(4) : Load complete : Failed
FFSS master waiting on port 10001 (UDP)
Using interface dummy0, with ip 192.168.80.10
MASTER : Loading my local servers
FFSS(2) : UDP thread launched...waiting for data
FFSS(2) : PING thread running...
FFSS(2) : QUEUE thread running...
Master running with pid : 18421
FFSS(2) : SEARCH thread running...

Ok, no pb, apres je lance le server :

FFSS Server v1.0-pre68 (c) Ze KiLleR / SkyTech 2001
FFSS library v1.0.0-pre68 (c) Ze KiLleR / SkyTech 2001
Server started with pid 18443
SkyUtils Information : Using SU_MALLOC_TRACE hooks : MALLOC_CHECK_=1 SU_MALLOC_TRACE=1 SU_MALLOC_PRINT=0
FFSS server waiting on port 10002 (UDP and TCP)
Using interface dummy0, with ip 192.168.80.10
FFSS(1) : Server running...
FFSS(5) : Start building index for share mp3 : mp3z
FFSS(5) :       Building index for sub-dir /win/mp3
FFSS(1) : TCP thread launched...waiting for connections
FFSS(2) : UDP thread launched...waiting for data
FFSS(5) :       Building index for sub-dir /win/mp3/redhot
... plein de building index...
FFSS(5) : Done building mp3 (199 files, 26 directories)
FFSS(5) : Start building index for share test : test of a share
FFSS(5) :       Building index for sub-dir /tmp/toto
FFSS(5) : Done building test (1 files, 0 directories)
FFSS(3) : Sending State message to ffss
Using BZ compression (before=5296 - after=2331)
Using BZ compression (before=3616 - after=1105)
Using BZ compression (before=16 - after=56)
Using BZ compression (before=32 - after=57)
FFSS(3) : Sending index answer message to ffss:10001
FFSS(3) : Index successfully sent to ffss:10001
FFSS Crashed :-(. Check: common.c:94
Aborted

Du cote du master :

FFSS(5) : Data found on UDP port from 192.168.80.10 (pc333.bennyben.fr) (53 bytes)... analysing
FFSS(3) : Received a state message from server
MASTER : Adding host bennyben (192.168.80.10) to domain Benny
MASTER : Adding state to my queue : bennyben (192.168.80.10) 1
FFSS(5) : Data found on UDP port from 192.168.80.10 (pc333.bennyben.fr) (28 bytes)... analysing
FFSS(3) : Received an index answer message (index size : 3569/5312/3648) Connect to 1035
Starting index thread
Index thread : buffer received... now indexing
FFSS(6) : Checking index integrity of bennyben
Indexing engine : Inserting host 'bennyben' (228 nodes)
Indexing engine : Inserting of 'bennyben' complete
Ending index thread... indexing completed (1 hosts)
FFSS(4) : 99% of unused space in hash table
FFSS(4) : 228 strings in index
FFSS(4) : Starting garbage collector...
FFSS(4) : Garbage collector completed
FFSS(4) : Dumping index to disk... (Index.dat)
FFSS(4) : Dump complete.
FFSS(4) : THREADS : PING : Sending PING sequence
FFSS(3) : Sending Ping message to servers
MASTER : Saving my local servers
(1mn apres...)
FFSS Crashed :-(. Check: common.c:94
Aborted
(mais un processus ffss-master tourne encore et est fonctionnel)


2) pour savoir l'etat de ses servers, le master envoie un ping broadcast,
et les declare ON ou OFF, si g bien compris.
Je pense que vous y avez pense, mais pourquoi ne pas envoyer de ping
aux servers de la liste seulement ?


3) apres avoir commente dans les sources du server, ligne 651: SU_FreeListElem(Bufs);
Le server tourne, mais le master ne change pas d'attitude. Le client plante 1 fois sur 2.



---------------------------------------
	ANCIENNES QUESTIONS
---------------------------------------

7) ca serait pas possible dans la recherche, de me renvoyer un moyen
de faire la difference entre une reponse fichier et une reponse dossier.
(ex: bennyben/ffss/01-limp_bizkit.mp3
 et  bennyben/ffss/limp bizkit)
J'ai pas envie de faire un algo qui regarde si ya une extension ou pas,
car ce n'est pas fiable.
Il faudrait en fait me filer une structure FC_TEntry, avec la taille
du fichier/dossier, ca peut etre pratique aussi.
>> Ce n'est pas ideal nan. Quand on a pense aux messages de recherche, on a trouve qu'un renvoie des reponses
>> directement en chaines etait le plus simple. Donc dans l'immediat, il n'est pas question de changer ce message.
>> Cependant, on pourrait peut-etre (PEUT-ETRE) rajouter un 2e message de recherche... a voir, il y a plus urgent pour le moment :)

11) ca serait pas mal de me filer des ptites stats lors d'un listing
de domaines (rien que le nb de machines, ou de machines on).
A moins que tu preferes que je te bourrine a coups de ServerListing...:)
MMM...ca serait pas un plugin a faire (ke je devrais faire ? :) ?
>> Hum pourquoi pas... mais ca te sert a quoi d'avoir le nombre de machines ON ?
>> Quand tu fais un ServerListing tu l'as... et en general quand on veux connaitre
>> combien y a de machines On, on veut la liste de ces machines.. donc un ServerListing, nan ?
